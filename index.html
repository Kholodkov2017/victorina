<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –æ –¥–æ—Ä–æ–∂–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f9ff;
      text-align: center;
      margin: 0;
      padding: 20px;
      overflow-x: hidden;
    }
    h1 {
      color: #0077cc;
    }
    .quiz-container {
      background: white;
      border-radius: 10px;
      max-width: 600px;
      margin: auto;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
    }
    .progress-container {
      width: 100%;
      background-color: #e6f3ff;
      border-radius: 10px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .progress-bar {
      height: 20px;
      background-color: #0077cc;
      border-radius: 10px;
      width: 0%;
      transition: width 0.5s ease;
    }
    .progress-text {
      margin-top: 5px;
      font-size: 14px;
      color: #555;
    }
    .question {
      font-size: 18px;
      margin-bottom: 15px;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 8px 0;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
      border: 2px solid #0077cc;
      border-radius: 5px;
      background: #e6f3ff;
      transition: 0.3s;
    }
    .answers button:hover {
      background: #cce6ff;
    }
    #nextBtn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      display: none;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #result {
      font-size: 20px;
      font-weight: bold;
      margin-top: 15px;
    }
    #wrongAnswers {
      text-align: left;
      margin-top: 20px;
      font-size: 16px;
      background: #f9f9f9;
      padding: 10px;
      border-radius: 5px;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–∏—Ü–µ–π—Å–∫–æ–≥–æ */
    .police-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease;
    }
    .police-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .police-image {
      width: 300px;
      height: 400px;
      background: url('https://foni.papik.pro/uploads/posts/2024-10/foni-papik-pro-aypc-p-kartinki-gaishnik-na-prozrachnom-fone-16.png') no-repeat center center;
      background-size: contain;
      margin-bottom: 30px;
      filter: drop-shadow(0 0 20px rgba(0, 119, 204, 0.7));
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    .police-message {
      color: white;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      background: rgba(0, 119, 204, 0.9);
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .continue-btn {
      margin-top: 20px;
      padding: 15px 30px;
      font-size: 18px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .continue-btn:hover {
      background: #45a049;
    }
    /* –°–∞–ª—é—Ç */
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>üö¶ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –æ –¥–æ—Ä–æ–∂–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏</h1>
  <div class="quiz-container">
    <!-- Progress Bar -->
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <div class="progress-text" id="progressText">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 24</div>
    
    <div id="quiz">
      <p class="question" id="question">–í–æ–ø—Ä–æ—Å –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
      <div class="answers" id="answers"></div>
      <button id="nextBtn">–°–ª–µ–¥—É—é—â–∏–π</button>
      <p id="result"></p>
      <div id="wrongAnswers"></div>
    </div>
  </div>

  <!-- –û–≤–µ—Ä–ª–µ–π —Å –ø–æ–ª–∏—Ü–µ–π—Å–∫–∏–º -->
  <div class="police-overlay" id="policeOverlay">
    <div class="police-image"></div>
    <div class="police-message">–ù—É–∂–Ω–æ –≤—ã—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è!</div>
    <button class="continue-btn" id="continueBtn">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
  </div>

  <canvas id="fireworks"></canvas>

  <script>
    const quizData = [
      { question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π —Å–∏–≥–Ω–∞–ª —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞?", answers: ["–ú–æ–∂–Ω–æ –∏–¥—Ç–∏", "–ù—É–∂–Ω–æ —Å—Ç–æ—è—Ç—å", "–ë–µ–∂–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ"], correct: 1 },
      { question: "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ—Ä–æ–≥—É?", answers: ["–ì–¥–µ —É–¥–æ–±–Ω–æ", "–ü–æ –ø–µ—à–µ—Ö–æ–¥–Ω–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥—É", "–í –ª—é–±–æ–º –º–µ—Å—Ç–µ"], correct: 1 },
      { question: "–ß—Ç–æ –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å –ø–µ—à–µ—Ö–æ–¥ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –¥–æ—Ä–æ–≥–∏?", answers: ["–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º", "–ó–∞–∫—Ä—ã—Ç—å –≥–ª–∞–∑–∞", "–ü–æ–±–µ–∂–∞—Ç—å –±—ã—Å—Ç—Ä–æ"], correct: 0 },
      { question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∂—ë–ª—Ç—ã–π —Å–∏–≥–Ω–∞–ª —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞?", answers: ["–ì–æ—Ç–æ–≤—å—Å—è –∫ –¥–≤–∏–∂–µ–Ω–∏—é –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ", "–ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å", "–û–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ—Ç"], correct: 0 },
      { question: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Å—Ç–æ, –≥–¥–µ –ø–µ—à–µ—Ö–æ–¥—ã –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –¥–æ—Ä–æ–≥—É?", answers: ["–ó–µ–±—Ä–∞", "–¢—Ä–æ—Ç—É–∞—Ä", "–û—Å—Ç–∞–Ω–æ–≤–∫–∞"], correct: 0 },
      { question: "–ì–¥–µ –¥–æ–ª–∂–Ω—ã —Ö–æ–¥–∏—Ç—å –ø–µ—à–µ—Ö–æ–¥—ã?", answers: ["–ü–æ —Ç—Ä–æ—Ç—É–∞—Ä—É", "–ü–æ –ø—Ä–æ–µ–∑–∂–µ–π —á–∞—Å—Ç–∏", "–ü–æ—Å–µ—Ä–µ–¥–∏–Ω–µ –¥–æ—Ä–æ–≥–∏"], correct: 0 },
      { question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–µ–ª—ë–Ω—ã–π —Å–∏–≥–Ω–∞–ª —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞?", answers: ["–ú–æ–∂–Ω–æ –∏–¥—Ç–∏", "–ù—É–∂–Ω–æ —Å—Ç–æ—è—Ç—å", "–û–ø–∞—Å–Ω–æ—Å—Ç—å"], correct: 0 },
      { question: "–ú–æ–∂–Ω–æ –ª–∏ –∏–≥—Ä–∞—Ç—å –Ω–∞ –ø—Ä–æ–µ–∑–∂–µ–π —á–∞—Å—Ç–∏?", answers: ["–î–∞", "–ù–µ—Ç", "–¢–æ–ª—å–∫–æ –¥–Ω—ë–º"], correct: 1 },
      { question: "–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º—è—á —É–∫–∞—Ç–∏–ª—Å—è –Ω–∞ –¥–æ—Ä–æ–≥—É?", answers: ["–í—ã–±–µ–∂–∞—Ç—å –∑–∞ –Ω–∏–º", "–ü–æ–∑–≤–∞—Ç—å –≤–∑—Ä–æ—Å–ª–æ–≥–æ", "–ë—ã—Å—Ç—Ä–æ –∑–∞–±—Ä–∞—Ç—å"], correct: 1 },
      { question: "–ö–∞–∫–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç —Ä–µ–≥—É–ª–∏—Ä–æ–≤—â–∏–∫ —Å –ø–æ–¥–Ω—è—Ç–æ–π —Ä—É–∫–æ–π –≤–≤–µ—Ä—Ö?", answers: ["–°—Ç–æ–ø, –¥–≤–∏–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ", "–ú–æ–∂–Ω–æ –∏–¥—Ç–∏", "–ú–æ–∂–Ω–æ –µ—Ö–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä—è–º–æ"], correct: 0 },
      { question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –¥–æ—Ä–æ–∂–Ω—ã–π –∑–Ω–∞–∫ '–ü–µ—à–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥'?", answers: ["–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ—Ä–æ–≥—É", "–ó–¥–µ—Å—å –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å", "–û–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ"], correct: 0 },
      { question: "–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ—Å–∞–¥–∫–µ –≤ –∞–≤—Ç–æ–±—É—Å?", answers: ["–¢–æ–ª–∫–∞—Ç—å—Å—è", "–ñ–¥–∞—Ç—å, –ø–æ–∫–∞ –∞–≤—Ç–æ–±—É—Å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è", "–ó–∞–±–µ–≥–∞—Ç—å –≤–ø–µ—Ä—ë–¥"], correct: 1 },
      { question: "–ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ—Ä–æ–≥—É –Ω–∞ –∫—Ä–∞—Å–Ω—ã–π —Å–∏–≥–Ω–∞–ª, –µ—Å–ª–∏ –º–∞—à–∏–Ω –Ω–µ—Ç?", answers: ["–î–∞", "–ù–µ—Ç", "–ò–Ω–æ–≥–¥–∞"], correct: 1 },
      { question: "–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∑–∞–≥–æ—Ä–µ–ª—Å—è –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç, –Ω–æ –º–∞—à–∏–Ω—ã –µ—â—ë –µ–¥—É—Ç?", answers: ["–ò–¥—Ç–∏ —Å—Ä–∞–∑—É", "–ü–æ–¥–æ–∂–¥–∞—Ç—å, –ø–æ–∫–∞ –º–∞—à–∏–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è", "–ë–µ–∂–∞—Ç—å –±—ã—Å—Ç—Ä–æ"], correct: 1 },
      { question: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç—å –¥–æ—Ä–æ–≥–∏ –¥–ª—è –º–∞—à–∏–Ω?", answers: ["–¢—Ä–æ—Ç—É–∞—Ä", "–ü—Ä–æ–µ–∑–∂–∞—è —á–∞—Å—Ç—å", "–û–±–æ—á–∏–Ω–∞"], correct: 1 },
      { question: "–ö–∞–∫ –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–∞—Å—Å–∞–∂–∏—Ä –≤ –º–∞—à–∏–Ω–µ?", answers: ["–ü—Ä–∏—Å—Ç–µ–≥–Ω—É—Ç—å—Å—è —Ä–µ–º–Ω—ë–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–•–æ–¥–∏—Ç—å –ø–æ —Å–∞–ª–æ–Ω—É", "–ì—Ä–æ–º–∫–æ –∫—Ä–∏—á–∞—Ç—å"], correct: 0 },
      { question: "–ú–æ–∂–Ω–æ –ª–∏ –∫–∞—Ç–∞—Ç—å—Å—è –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ –ø–æ –ø—Ä–æ–µ–∑–∂–µ–π —á–∞—Å—Ç–∏ –¥–µ—Ç—è–º –º–ª–∞–¥—à–µ 14 –ª–µ—Ç?", answers: ["–î–∞", "–ù–µ—Ç", "–¢–æ–ª—å–∫–æ —Å –¥—Ä—É–∑—å—è–º–∏"], correct: 1 },
      { question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –º–∏–≥–∞—é—â–∏–π –∑–µ–ª—ë–Ω—ã–π —Å–∏–≥–Ω–∞–ª —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞?", answers: ["–°–∫–æ—Ä–æ –∑–∞–≥–æ—Ä–∏—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–π", "–ú–æ–∂–Ω–æ –∏–¥—Ç–∏ –¥–æ–ª–≥–æ", "–û–ø–∞—Å–Ω–æ—Å—Ç—å"], correct: 0 },
      { question: "–ö–∞–∫ –Ω—É–∂–Ω–æ –æ–±—Ö–æ–¥–∏—Ç—å –∞–≤—Ç–æ–±—É—Å, –µ—Å–ª–∏ –æ–Ω —Å—Ç–æ–∏—Ç –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ?", answers: ["–°–∑–∞–¥–∏", "–°–ø–µ—Ä–µ–¥–∏, —É–±–µ–¥–∏–≤—à–∏—Å—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–ö–∞–∫ —É–≥–æ–¥–Ω–æ"], correct: 0 },
      { question: "–ö–æ–≥–æ –Ω–∞–∑—ã–≤–∞—é—Ç –ø–µ—à–µ—Ö–æ–¥–æ–º?", answers: ["–ß–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –∏–¥—ë—Ç –ø–µ—à–∫–æ–º", "–í–æ–¥–∏—Ç–µ–ª—è", "–ü–∞—Å—Å–∞–∂–∏—Ä–∞"], correct: 0 },
      { question: "–ö–∞–∫–æ–π –∑–Ω–∞–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –¥–µ—Ç—è—Ö –Ω–∞ –¥–æ—Ä–æ–≥–µ?", answers: ["–¢—Ä–µ—É–≥–æ–ª—å–Ω—ã–π —Å –¥–µ—Ç—å–º–∏", "–ö—Ä—É–≥–ª—ã–π —Å –º–∞—à–∏–Ω–æ–π", "–°–∏–Ω–∏–π —Å –∞–≤—Ç–æ–±—É—Å–æ–º"], correct: 0 },
      { question: "–ì–¥–µ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –≤—Å–µ–≥–æ –∂–¥–∞—Ç—å –∞–≤—Ç–æ–±—É—Å?", answers: ["–ù–∞ –ø—Ä–æ–µ–∑–∂–µ–π —á–∞—Å—Ç–∏", "–ù–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ", "–ü–æ—Å—Ä–µ–¥–∏ –¥–æ—Ä–æ–≥–∏"], correct: 1 },
      { question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –¥–æ—Ä–æ–∂–Ω—ã–π –∑–Ω–∞–∫ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞?", answers: ["–í–µ–ª–æ—Å–∏–ø–µ–¥–Ω–∞—è –¥–æ—Ä–æ–∂–∫–∞", "–ó–∞–ø—Ä–µ—â–µ–Ω–æ –µ–∑–¥–∏—Ç—å –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ", "–ü–∞—Ä–∫–æ–≤–∫–∞"], correct: 0 },
      { question: "–ö–∞–∫–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –µ—Ö–∞—Ç—å —Å —Å–∏—Ä–µ–Ω–æ–π –∏ –º–∞—è—á–∫–∞–º–∏?", answers: ["–ê–≤—Ç–æ–±—É—Å", "–°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å, –ø–æ–ª–∏—Ü–∏—è, –ø–æ–∂–∞—Ä–Ω–∞—è –º–∞—à–∏–Ω–∞", "–¢–∞–∫—Å–∏"], correct: 1 }
    ];

    let currentQuestion = 0;
    let score = 0;
    let wrongAnswersList = [];

    const questionEl = document.getElementById("question");
    const answersEl = document.getElementById("answers");
    const nextBtn = document.getElementById("nextBtn");
    const resultEl = document.getElementById("result");
    const wrongAnswersEl = document.getElementById("wrongAnswers");
    const progressBar = document.getElementById("progressBar");
    const progressText = document.getElementById("progressText");
    const policeOverlay = document.getElementById("policeOverlay");
    const continueBtn = document.getElementById("continueBtn");

    function updateProgressBar() {
      const progress = ((currentQuestion + 1) / quizData.length) * 100;
      progressBar.style.width = progress + "%";
      progressText.textContent = `–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${quizData.length}`;
    }

    function loadQuestion() {
      const q = quizData[currentQuestion];
      questionEl.textContent = q.question;
      answersEl.innerHTML = "";
      q.answers.forEach((answer, index) => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.addEventListener("click", () => checkAnswer(index));
        answersEl.appendChild(btn);
      });
      nextBtn.style.display = "none";
      
      updateProgressBar();
    }

    function checkAnswer(index) {
      const q = quizData[currentQuestion];
      const buttons = answersEl.querySelectorAll("button");
      buttons.forEach((btn, i) => {
        btn.disabled = true;
        if (i === q.correct) {
          btn.style.background = "#4CAF50";
          btn.style.color = "white";
        }
        if (i === index && i !== q.correct) {
          btn.style.background = "#f44336";
          btn.style.color = "white";
          wrongAnswersList.push({
            question: q.question,
            yourAnswer: q.answers[index],
            correctAnswer: q.answers[q.correct]
          });
        }
      });
      if (index === q.correct) {
        score++;
      }
      nextBtn.style.display = "inline-block";
    }

    nextBtn.addEventListener("click", () => {
      currentQuestion++;
      if (currentQuestion < quizData.length) {
        loadQuestion();
      } else {
        showResult();
      }
    });

    function showResult() {
      // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
      document.getElementById('quiz').style.display = 'none';
      progressText.textContent = "–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!";
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ 60% –∏–ª–∏ –±–æ–ª–µ–µ –æ—à–∏–±–æ–∫
      const errorPercentage = (wrongAnswersList.length / quizData.length) * 100;
      console.log(errorPercentage)
      
      if (errorPercentage >= 60) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–∏—Ü–µ–π—Å–∫–æ–≥–æ
        policeOverlay.classList.add('active');
      } else {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–∑—É
        displayFinalResults();
      }
    }

    function displayFinalResults() {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
      document.getElementById('quiz').style.display = 'block';
      questionEl.textContent = "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!";
      answersEl.innerHTML = "";
      nextBtn.style.display = "none";
      resultEl.textContent = `–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ ${quizData.length}`;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º progress bar –¥–æ 100%
      progressBar.style.width = "100%";

      if (wrongAnswersList.length > 0) {
        let html = "<h3>–û—à–∏–±–∫–∏:</h3><ul>";
        wrongAnswersList.forEach(item => {
          html += `<li><b>${item.question}</b><br>‚ùå –í–∞—à –æ—Ç–≤–µ—Ç: ${item.yourAnswer}<br>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${item.correctAnswer}</li><br>`;
        });
        html += "</ul>";
        wrongAnswersEl.innerHTML = html;
      }

      if (score > 20) {
        startFireworks();
      }
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
    continueBtn.addEventListener('click', function() {
      policeOverlay.classList.remove('active');
      displayFinalResults();
    });

    // === –°–∞–ª—é—Ç ===
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    let particles = [];
    resizeCanvas();

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);

    function startFireworks() {
      for (let i = 0; i < 5; i++) {
        createFirework(Math.random() * canvas.width, Math.random() * canvas.height / 2);
      }
      animate();
    }

    function createFirework(x, y) {
      let colors = ["#ff4d4d", "#4dff4d", "#4d4dff", "#ffff4d", "#ff4dff", "#4dffff"];
      for (let i = 0; i < 100; i++) {
        particles.push({
          x: x,
          y: y,
          angle: Math.random() * 2 * Math.PI,
          speed: Math.random() * 5 + 2,
          radius: 2,
          life: 100,
          color: colors[Math.floor(Math.random() * colors.length)]
        });
      }
    }

    function animate() {
      ctx.fillStyle = "rgba(0,0,0,0.2)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p, index) => {
        p.x += Math.cos(p.angle) * p.speed;
        p.y += Math.sin(p.angle) * p.speed;
        p.life--;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();
        if (p.life <= 0) particles.splice(index, 1);
      });
      if (particles.length > 0) {
        requestAnimationFrame(animate);
      }
    }

    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–∏—Ü–µ–π—Å–∫–æ–≥–æ
    const policeImg = new Image();
    policeImg.src = 'https://foni.papik.pro/uploads/posts/2024-10/foni-papik-pro-aypc-p-kartinki-gaishnik-na-prozrachnom-fone-16.png';

    loadQuestion();
  </script>
</body>
</html>
